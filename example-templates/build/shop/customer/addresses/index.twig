{% extends 'shop/_private/layouts' %}

{% block main %}
    <!-- Template: {{ _self }}.twig -->
    {% set customer = craft.commerce.customers.customer %}
    {% set primaryBillingAddress = customer.getPrimaryBillingAddress() %}
    {% set primaryShippingAddress = customer.getPrimaryShippingAddress() %}

    {% if customer.addresses|length %}
        <div class="flex justify-between items-center">
            <h1>Manage your addresses</h1>
            <a class="button button-primary right" href="{{ url('/shop/customer/addresses/edit') }}">Add New
                Address</a>
        </div>

        <div class="grid-addresses mt-6">
            {% for address in customer.addresses %}
                <div class="address-card">
                    {{ include('shop/_private/address/address', {address: address}) }}

                    <div class="buttons mt-4">
                        <a class="button button-primary"
                           href="{{ url('/shop/customer/addresses/edit') }}?addressId={{ address.id }}">Edit</a>
                        <form method="post" action="">
                            {{ actionInput('commerce/customer-addresses/delete') }}
                            {{ hiddenInput('id', address.id) }}
                            {{ csrfInput() }}
                            <button type="submit"
                                    class="cursor-pointer rounded px-4 py-2 inline-block bg-blue-500 hover:bg-blue-600 text-white hover:text-white">
                                Delete
                            </button>
                        </form>
                    </div>

                    <div>
                        <strong>{% if primaryBillingAddress and primaryBillingAddress.id == address.id %}<i
                                    class="fa fa-check text-green"></i> Primary Billing{% endif %}</strong>
                    </div>
                    <div>
                        <strong>{% if primaryShippingAddress and primaryShippingAddress.id == address.id %}<i
                                    class="fa fa-check text-green"></i> Primary Shipping{% endif %}</strong>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h1 class="text-center">Manage your addresses</h1>

        <hr>

        <div class="empty-index">
            <i class="fas fa-address-book"></i>
            <div>
                You donâ€™t have any addresses yet.
                <div class="mt-6">
                    <a class="button button-primary" href="{{ url('/shop/customer/addresses/edit') }}">Add a
                        new address</a>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}
